## 개요

A/B 테스트를 진행해야 하는 과정에서 유명 솔루션 기업인 핵클의 문서를 보게 됐다. 핵클에서는 임의의 사용자를 테스트 버킷에 할당하기 위해 MurmurHash 함수를 통해 매핑한다고 한다. 단순 지적 호기심이 발동해서 가볍게 알아보기로 했다.

## MurmurHash

MurmurHash는 일반적인 해시 기반 조회에 적합한 비암호화 해시 함수이다. 암호화 해시 함수와 달리 공격자가 복호화 하는 것이 어렵지 않게 설계됐기 때문에 암호화 목적으로는 사용하기에 적합하지 않다.

## 다양한 버전

MurmurHash는 작성일 기준, 1,2,3 버전까지 공개되어 있다. 3버전이 최신 버전이며, 이전 버전을 차례로 개선시킨 버전이다.

현재 버전인 MurmurHash3는 32비트 혹은 128비트 해시값을 생성한다. 128비트를 사용하는 경우, 알고리즘이 각 플랫폼에 최적화되어 있기 때문에 x86(32비트)과 x64(64비트) 시스템에서 서로 다른 결과를 반환한다.

MurmurHash3는 해시 함수 테스트 도구인 SMHasher와 함께 출시됐다.

## MurmurHash 왜 씀?

- 빠르게 해시할 수 있고, 해시 값을 매우 균일하게 분배할 수 있다. 따라서 파티셔닝, 샤딩 등 작업이 필요한 소프트웨어에 널리 사용된다. (nginx, memcached, kafka, elasticsearch, ....)
- 균일한 분포는 해시 충돌도 줄여서 조회 성능을 향상시킨다.

## References

- https://en.wikipedia.org/wiki/MurmurHash
