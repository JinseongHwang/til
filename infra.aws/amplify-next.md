# Next.js - AWS Amplify ì»¨ì…‰

> https://docs.amplify.aws/nextjs/how-amplify-works/concepts/ ë¥¼ ë²ˆì—­í•˜ê³  ì´í•´í•´ë³´ì.
> ê·¸ë¦¬ê³  ê·¸ëƒ¥ ë‚´ê°€ ê¶ê¸ˆí–ˆë˜ ë‚´ìš©ë“¤ë¡œ ì±„ì›Œë„£ê¸°

# ì»´í¬ë„ŒíŠ¸ ì‚´ì§ ì‚´í´ë³´ê¸°

## AWS Amplify

AWS AmplifyëŠ” í’€ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ í”Œë«í¼ì´ë‹¤.
AmplifyëŠ” í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œì˜ í†µí•© ê°œë°œì„ ë•ê³ , ë°°í¬ ë° í˜¸ìŠ¤íŒ…ê¹Œì§€ ì§€ì›í•œë‹¤.
1. ë°±ì—”ë“œ êµ¬ì¶•
   - ì¸ì¦(Authentication): ë¡œê·¸ì¸/íšŒì›ê°€ì…, OAuth í†µí•©(Google, Facebook ë“±).
   - ë°ì´í„°ë² ì´ìŠ¤ ë° API: GraphQLì´ë‚˜ REST APIë¥¼ í†µí•´ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ì™€ í†µì‹ .
   - ìŠ¤í† ë¦¬ì§€(Storage): S3ë¥¼ ì´ìš©í•œ íŒŒì¼ ì—…ë¡œë“œ ë° ê´€ë¦¬.
2. í˜¸ìŠ¤íŒ… ë° ë°°í¬
   - ì •ì  ì›¹ì‚¬ì´íŠ¸ì™€ ì„œë²„ë¦¬ìŠ¤ ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìë™ìœ¼ë¡œ ë¹Œë“œí•˜ê³  ë°°í¬.
   - CI/CD íŒŒì´í”„ë¼ì¸ì„ ì„¤ì •í•˜ì—¬ ì½”ë“œ ë³€ê²½ ì‚¬í•­ì„ ìë™ìœ¼ë¡œ ë°°í¬.
3. ì„œë²„ë¦¬ìŠ¤(Serverless) ì„œë¹„ìŠ¤
   - ë°±ì—”ë“œ ì½”ë“œ ì—†ì´ í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ë¥¼ êµ¬ì„± ë° ê´€ë¦¬.
4. í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬ì™€ì˜ í†µí•©
   - React, Vue, Angular, Next.js ë“±ê³¼ ì‰½ê²Œ í†µí•© ê°€ëŠ¥.

## Next.js

Next.jsëŠ” React ê¸°ë°˜ì˜ í’€ìŠ¤íƒ í”„ë ˆì„ì›Œí¬ë¡œ, ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§(SSR) ë° ì •ì  ì‚¬ì´íŠ¸ ìƒì„±(SSG)ì„ ì§€ì›í•˜ë©° SEO ë° ì„±ëŠ¥ ìµœì í™”ì— íŠ¹í™”ë˜ì–´ ìˆë‹¤.
1. ë Œë”ë§ ë°©ì‹
   - ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§(SSR): ìš”ì²­ ì‹œ ì„œë²„ì—ì„œ HTMLì„ ìƒì„±.
   - ì •ì  ì‚¬ì´íŠ¸ ìƒì„±(SSG): ë¹Œë“œ ì‹œ HTMLì„ ë¯¸ë¦¬ ìƒì„±í•˜ì—¬ ë¹ ë¥¸ ë¡œë”© ì†ë„ ì œê³µ.
   - í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë Œë”ë§(CSR): Reactì˜ ê¸°ë³¸ ë°©ì‹.
2. API Routes
   - ë°±ì—”ë“œ APIë¥¼ í”„ë ˆì„ì›Œí¬ ë‚´ì—ì„œ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŒ.
   - ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ì™€ ìœ ì‚¬í•œ ê¸°ëŠ¥ ì œê³µ.
3. ì´ë¯¸ì§€ ìµœì í™”
   - Next.jsì˜ next/image ì»´í¬ë„ŒíŠ¸ë¥¼ í†µí•´ ì´ë¯¸ì§€ í¬ê¸° ë° í¬ë§·ì„ ìë™ìœ¼ë¡œ ìµœì í™”.
4. Dynamic Routing ë° Middleware
   - ë™ì  ë¼ìš°íŒ…ì„ í†µí•´ ë‹¤ì–‘í•œ URL íŒ¨í„´ì„ ì§€ì›.
   - Middlewareë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ ì‹œ ë™ì  ì²˜ë¦¬ë¥¼ ìˆ˜í–‰.
5. SEO
   - SSRê³¼ SSG ë•ë¶„ì— SEOì— ìœ ë¦¬.

## DynamoDB vs DocumentDB

DynamoDBëŠ” AWSì—ì„œ ì œê³µí•˜ëŠ” ì™„ì „ ê´€ë¦¬í˜• NoSQL ë°ì´í„°ë² ì´ìŠ¤ì´ë‹¤.

1. DynamoDBëŠ” Key-Valueì™€ Document ëª¨ë¸ì„ ì§€ì›í•˜ëŠ” ë°˜ë©´, DocumentDBëŠ” MongoDBì™€ í˜¸í™˜ë˜ëŠ” JSON ê¸°ë°˜ Document ëª¨ë¸ì„ ì‚¬ìš©í•œë‹¤.
2. DynamoDBëŠ” ì œí•œëœ ì¿¼ë¦¬ì™€ ë³´ì¡° ì¸ë±ìŠ¤ë¥¼ ì œê³µí•˜ì§€ë§Œ, DocumentDBëŠ” ë³µì¡í•œ í•„í„°ë§ê³¼ ì§‘ê³„ê°€ ê°€ëŠ¥í•œ MongoDB ì¿¼ë¦¬ ì–¸ì–´ë¥¼ ì§€ì›í•œë‹¤.
3. DynamoDBëŠ” ìë™ìœ¼ë¡œ ìˆ˜í‰ í™•ì¥ë˜ì§€ë§Œ, DocumentDBëŠ” ìˆ˜ë™ìœ¼ë¡œ ë…¸ë“œì™€ ì½ê¸° ë³µì œë³¸ì„ ì¶”ê°€í•˜ëŠ” ìˆ˜ì§ í™•ì¥ ë°©ì‹ì´ë‹¤.
4. DynamoDBëŠ” ìµœì¢… ì¼ê´€ì„±ì„ ê¸°ë³¸ìœ¼ë¡œ í•˜ë©° ê°•ë ¥í•œ ì¼ê´€ì„±ì„ ì„ íƒì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë°˜ë©´, DocumentDBëŠ” ê°•ë ¥í•œ ì¼ê´€ì„±ì„ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•œë‹¤.
5. DynamoDBëŠ” ë°€ë¦¬ì´ˆ ìˆ˜ì¤€ì˜ ì¼ê´€ëœ ì§€ì—° ì‹œê°„ì„ ì œê³µí•˜ì§€ë§Œ, DocumentDBëŠ” ëŒ€ê·œëª¨ ë³µì¡í•œ ì¿¼ë¦¬ì— ì í•©í•œ ì„±ëŠ¥ì„ ì œê³µí•œë‹¤.
6. DynamoDBëŠ” ìš”ì²­ ë‹¨ìœ„ ê¸°ë°˜ìœ¼ë¡œ ê³¼ê¸ˆë˜ë©° íŠ¸ë˜í”½ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ëŒ€ì‘í•˜ì§€ë§Œ, DocumentDBëŠ” í”„ë¡œë¹„ì €ë‹ëœ ì¸ìŠ¤í„´ìŠ¤ì™€ ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©ëŸ‰ì— ë”°ë¼ ê³¼ê¸ˆëœë‹¤.

# ë²ˆì—­ ë° ì½ê¸°

## ê°œìš”

AWS Amplify Gen 2ëŠ” TypeScript ê¸°ë°˜ì˜ ì½”ë“œ ìš°ì„  ê°œë°œì ê²½í—˜(DX)ì„ í†µí•´ ë°±ì—”ë“œë¥¼ ì •ì˜í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. Gen 2 DXëŠ” í˜¸ìŠ¤íŒ…, ë°±ì—”ë“œ, UI ë¹Œë”© ê¸°ëŠ¥ì„ í•˜ë‚˜ë¡œ í†µí•©í•˜ë©°, ì½”ë“œ ìš°ì„  ì ‘ê·¼ ë°©ì‹ì„ ì œê³µí•œë‹¤. AmplifyëŠ” í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œìê°€ TypeScriptë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°ì´í„° ëª¨ë¸, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ì¸ì¦ ë° ê¶Œí•œ ë¶€ì—¬ ê·œì¹™ì„ ì‘ì„±í•˜ê¸°ë§Œ í•˜ë©´ í´ë¼ìš°ë“œ ì¸í”„ë¼ë¥¼ ë°°í¬í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤. AmplifyëŠ” í•„ìš”í•œ í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ë¥¼ ìë™ìœ¼ë¡œ êµ¬ì„±í•˜ë©°, ê¸°ë³¸ì ì¸ AWS ì„œë¹„ìŠ¤ë“¤ì„ ì§ì ‘ ì—°ë™í•´ì•¼ í•˜ëŠ” ë¶€ë‹´ì„ ì œê±°í•œë‹¤.

## ì œê³µí•˜ëŠ” ê¸°ëŠ¥ë“¤

### TypeScriptë¡œ í’€ìŠ¤íƒ ì•± ê°œë°œ

Gen 2 DXë¥¼ ì‚¬ìš©í•˜ë©´ TypeScriptë¥¼ ì‘ì„±í•˜ì—¬ ë°±ì—”ë“œ ì¸í”„ë¼ë¥¼ í”„ë¡œë¹„ì €ë‹í•  ìˆ˜ ìˆë‹¤. ì•„ë˜ ë‹¤ì´ì–´ê·¸ë¨ì—ì„œ í•‘í¬ìƒ‰ìœ¼ë¡œ ê°•ì¡°ëœ ë°•ìŠ¤ëŠ” Gen 1ê³¼ ë¹„êµí–ˆì„ ë•Œ ì¸í”„ë¼ í”„ë¡œë¹„ì €ë‹ ë°©ì‹ì˜ ì£¼ìš” ì°¨ì´ë¥¼ ë³´ì—¬ì¤€ë‹¤. Gen 1ì—ì„œëŠ” Studioì˜ ì½˜ì†”ì´ë‚˜ CLIë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸í”„ë¼ë¥¼ í”„ë¡œë¹„ì €ë‹í–ˆì§€ë§Œ, Gen 2ì—ì„œëŠ” íŒŒì¼ ê¸°ë°˜ ê·œì¹™(ì˜ˆ: amplify/auth/resource.ts ë˜ëŠ” amplify/auth/data.ts)ì„ ë”°ë¥´ëŠ” TypeScript ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤. TypeScriptì˜ íƒ€ì…ê³¼ ë¦¬ì†ŒìŠ¤ë¥¼ ìœ„í•œ í´ë˜ìŠ¤ ë•ë¶„ì— Visual Studio Codeì—ì„œ ì—„ê²©í•œ íƒ€ì… ê²€ì‚¬ì™€ IntelliSenseë¥¼ í™œìš©í•˜ì—¬ ì˜¤ë¥˜ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤. ë°±ì—”ë“œ ì½”ë“œì— ì¤‘ëŒ€í•œ ë³€ê²½ ì‚¬í•­ì´ ë°œìƒí•˜ë©´, ì—°ê´€ëœ í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œì—ì„œ ì¦‰ì‹œ íƒ€ì… ì˜¤ë¥˜ë¡œ ë°˜ì˜ëœë‹¤. ì´ íŒŒì¼ ê¸°ë°˜ ê·œì¹™ì€ â€œì„¤ì •ë³´ë‹¤ ê´€ë¡€(convention over configuration)â€ íŒ¨ëŸ¬ë‹¤ì„ì„ ë”°ë¥´ë©°, ë¦¬ì†ŒìŠ¤ë¥¼ íƒ€ì…ë³„ë¡œ ë³„ë„ì˜ íŒŒì¼ì— ê·¸ë£¹í™”í•˜ë©´ ë¦¬ì†ŒìŠ¤ ì •ì˜ë¥¼ ì°¾ëŠ” ìœ„ì¹˜ë¥¼ ì •í™•íˆ ì•Œ ìˆ˜ ìˆë‹¤.
![img](https://docs.amplify.aws/images/gen2/how-amplify-works/nextImageExportOptimizer/amplify-flow-opt-1920.WEBP)

### ë” ë¹ ë¥¸ ë¡œì»¬ ê°œë°œ

ê°œë°œìë³„ í´ë¼ìš°ë“œ ìƒŒë“œë°•ìŠ¤ í™˜ê²½ì€ ë” ë¹ ë¥¸ ë°˜ë³µ ì‘ì—…ì„ ìœ„í•´ ìµœì í™”ë˜ì–´ ìˆë‹¤. íŒ€ì˜ ê° ê°œë°œìëŠ” ìì‹ ì˜ ë³€ê²½ ì‚¬í•­ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” ë…ë¦½ëœ í´ë¼ìš°ë“œ ê°œë°œ í™˜ê²½ì„ ì œê³µë°›ëŠ”ë‹¤. ì´ëŸ¬í•œ í´ë¼ìš°ë“œ ìƒŒë“œë°•ìŠ¤ í™˜ê²½ì€ ë¡œì»¬ ê°œë°œ ì „ìš©ì´ì§€ë§Œ, ë¹Œë“œ ê³¼ì •ì—ì„œ ì •í™•í•œ AWS ë°±ì—”ë“œë¥¼ ë°°í¬í•œë‹¤. ì›Œí¬í”Œë¡œìš°ì— ë”°ë¼ ë°˜ë³µì ì¸ ì—…ë°ì´íŠ¸ ì†ë„ê°€ Gen 1 ë°°í¬ì— ë¹„í•´ ìµœëŒ€ 8ë°° ë¹¨ë¼ì¡Œë‹¤. ì•„ë˜ ë‹¤ì´ì–´ê·¸ë¨ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´, ë„¤ ëª…ì˜ ê°œë°œìê°€ ì„œë¡œì˜ í™˜ê²½ì„ ë°©í•´í•˜ì§€ ì•Šê³  ë…ë¦½ì ìœ¼ë¡œ í’€ìŠ¤íƒ ê¸°ëŠ¥ì„ ê°œë°œí•  ìˆ˜ ìˆë‹¤.
![img](https://docs.amplify.aws/images/gen2/how-amplify-works/nextImageExportOptimizer/sandbox-opt-1920.WEBP)

### Git ê¸°ë°˜ í’€ìŠ¤íƒ í™˜ê²½

ëª¨ë“  ê³µìœ  í™˜ê²½(ì˜ˆ: í”„ë¡œë•ì…˜, ìŠ¤í…Œì´ì§•, ê°ë§ˆ)ì€ Git ì €ì¥ì†Œì˜ ë¸Œëœì¹˜ì™€ 1:1ë¡œ ë§¤í•‘ëœë‹¤. ìƒˆë¡œìš´ ê¸°ëŠ¥ì€ í”„ë¡œë•ì…˜ì— ë³‘í•©ë˜ê¸° ì „ì— í’€ ë¦¬í€˜ìŠ¤íŠ¸ í”„ë¦¬ë·°(ë˜ëŠ” ê¸°ëŠ¥ ë¸Œëœì¹˜)ì—ì„œ ì„ì‹œ í™˜ê²½ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‹¤. Gen 1ì—ì„œëŠ” í’€ìŠ¤íƒ í™˜ê²½ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ CLIë‚˜ ì½˜ì†”ì—ì„œ ì—¬ëŸ¬ ë‹¨ê³„ë¥¼ êµ¬ì„±í•´ì•¼ í–ˆì§€ë§Œ, Gen 2ëŠ” ì„¤ì •ì´ í•„ìš” ì—†ëŠ”(zero-config) í™˜ê²½ì„ ì œê³µí•œë‹¤. ì½”ë“œ ìš°ì„  ì ‘ê·¼ ë°©ì‹ ë•ë¶„ì— Git ì €ì¥ì†Œê°€ í•­ìƒ í’€ìŠ¤íƒ ì•±ì˜ ìƒíƒœì— ëŒ€í•œ ë‹¨ì¼ ì§„ì‹¤ì˜ ì›ì²œ(source of truth) ì—­í• ì„ í•œë‹¤. ëª¨ë“  ë°±ì—”ë“œ ë¦¬ì†ŒìŠ¤ëŠ” ì½”ë“œë¡œ ì •ì˜ë˜ì–´ ë¸Œëœì¹˜ ê°„ ì¬í˜„ì„±ê³¼ ì´ì‹ì„±ì´ ë³´ì¥ëœë‹¤. ë˜í•œ í™˜ê²½ ë³€ìˆ˜ì™€ ë¹„ë°€ ë³€ìˆ˜ì˜ ì¤‘ì•™ ê´€ë¦¬ê°€ ê°€ëŠ¥í•´ì ¸, í•˜ìœ„ í™˜ê²½ì—ì„œ ìƒìœ„ í™˜ê²½ìœ¼ë¡œì˜ í”„ë¡œëª¨ì…˜ ì›Œí¬í”Œë¡œìš°ê°€ ë‹¨ìˆœí™”ëœë‹¤.
![img](https://docs.amplify.aws/images/gen2/how-amplify-works/nextImageExportOptimizer/fullstack-opt-1920.WEBP)

### í†µí•© ê´€ë¦¬ ì½˜ì†”

ëª¨ë“  ë¸Œëœì¹˜ëŠ” ìƒˆë¡œìš´ Amplify ì½˜ì†”ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤. Amplify Gen 2 ì½˜ì†”ì€ ë¹Œë“œ, í˜¸ìŠ¤íŒ… ì„¤ì •(ì˜ˆ: ì»¤ìŠ¤í…€ ë„ë©”ì¸), ë°°í¬ëœ ë¦¬ì†ŒìŠ¤(ì˜ˆ: ë°ì´í„° ë¸Œë¼ìš°ì €, ì‚¬ìš©ì ê´€ë¦¬), í™˜ê²½ ë³€ìˆ˜ ë° ë¹„ë°€ ë³€ìˆ˜ë¥¼ í•œ ê³³ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë‹¨ì¼ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•œë‹¤. ë°°í¬ëœ ë¦¬ì†ŒìŠ¤ëŠ” ë‹¤ë¥¸ AWS ì„œë¹„ìŠ¤ ì½˜ì†”ì—ì„œë„ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ìˆì§€ë§Œ, Amplify ì½˜ì†”ì€ ë°ì´í„°, ì¸ì¦, ìŠ¤í† ë¦¬ì§€, í•¨ìˆ˜ ë“± ê±°ì˜ ëª¨ë“  ì•±ì´ í•„ìš”ë¡œ í•˜ëŠ” ì¹´í…Œê³ ë¦¬ì— ëŒ€í•´ ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë°ì´í„° ê´€ë¦¬ì˜ ê²½ìš° AmplifyëŠ” API í”Œë ˆì´ê·¸ë¼ìš´ë“œì™€ í•¨ê»˜ ê´€ê³„ ì„¤ì •, ì‹œë“œ ë°ì´í„° ìƒì„±, íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ì„ ê°–ì¶˜ ë°ì´í„° ë§¤ë‹ˆì €(ê³§ ì¶œì‹œ ì˜ˆì •)ë¥¼ ì œê³µí•œë‹¤.
![video](https://docs.amplify.aws/images/gen2/how-amplify-works/console.mp4)

## ì•± ë§Œë“¤ê¸°

### ë°ì´í„°

@aws-amplify/backend ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” TypeScript ê¸°ë°˜ì˜ ë°ì´í„° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì œê³µí•˜ì—¬ ì‹¤ì‹œê°„ API(AWS AppSync GraphQL API ê¸°ë°˜)ì™€ NoSQL ë°ì´í„°ë² ì´ìŠ¤(Amazon DynamoDB í…Œì´ë¸” ê¸°ë°˜)ë¥¼ ì™„ì „í•˜ê²Œ íƒ€ì…í™”í•˜ì—¬ ì„¤ì •í•  ìˆ˜ ìˆê²Œ í•œë‹¤. Amplify ë°±ì—”ë“œë¥¼ ìƒì„±í•œ í›„ì—ëŠ” amplify/data/resource.ts íŒŒì¼ì´ ìƒì„±ë˜ë©°, ì´ íŒŒì¼ì— ì•±ì˜ ë°ì´í„° ìŠ¤í‚¤ë§ˆê°€ í¬í•¨ëœë‹¤.
defineData í•¨ìˆ˜ëŠ” ì´ ìŠ¤í‚¤ë§ˆë¥¼ í™œìš©í•´ ëª¨ë“  ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ë©°, ì™„ì „í•œ ë°ì´í„° ë°±ì—”ë“œë¥¼ êµ¬ì„±í•œë‹¤.

> ì´ëŸ¬í•œ ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ ì ‘ê·¼ ë°©ì‹ì€ Gen 1ì˜ Amplify GraphQL APIì˜ ì§„í™”ëœ í˜•íƒœë¡œ, ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì„ ì œê³µí•œë‹¤: ìë™ ì™„ì„±(dot completion), IntelliSense, íƒ€ì… ê²€ì¦(type validation)

ì˜ˆë¥¼ ë“¤ì–´, ì±„íŒ… ì•±ì˜ ë°ì´í„° ëª¨ë¸ì€ ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë  ìˆ˜ ìˆë‹¤:

```Typescript
const schema = a.schema({
  Chat: a.model({
    name: a.string(),
    message: a.hasMany('Message', 'chatId'),
  }),
  Message: a.model({
    text: a.string(),
    chat: a.belongsTo('Chat', 'chatId'),
    chatId: a.id()
  }),
});
```

ì•±ì˜ í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” generateClient í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ íƒ€ì…ì´ ì ìš©ëœ í´ë¼ì´ì–¸íŠ¸ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì œê³µë°›ì„ ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œì—ì„œ ëª¨ë¸ì— ëŒ€í•œ CRUD(ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ) ì‘ì—…ì„ ì†ì‰½ê²Œ í†µí•©í•  ìˆ˜ ìˆë‹¤.

> Gen 2ì—ì„œëŠ” Gen 1ê³¼ ë‹¬ë¦¬ ëª…ì‹œì ì¸ ì½”ë“œ ìƒì„±(codegen) ë‹¨ê³„ ì—†ì´ ìë™ìœ¼ë¡œ íƒ€ì…ì„ ìƒì„±í•´ì¤€ë‹¤.

```Typescript
// generate your data client using the Schema from your backend
const client = generateClient<Schema>();

// list all messages
const { data } = await client.models.Message.list();

// create a new message
const { errors, data: newMessage } = await client.models.Message.create({
  text: 'My message text'
});
```

### ì¸ì¦

ì¸ì¦(Auth)ë„ ë°ì´í„°ì™€ ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤. ì•±ì˜ ì¸ì¦ ì„¤ì •ì€ amplify/auth/resource.ts íŒŒì¼ì—ì„œ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¸ì¦ ì´ë©”ì¼ì˜ ì œëª©ì„ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´, ê¸°ë³¸ ìƒì„±ëœ ì½”ë“œë¥¼ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤:

```Typescript
export const auth = defineAuth({
  loginWith: {
    email: {
      verificationEmailSubject: 'Welcome ğŸ‘‹ Verify your email!'
    }
  }
});
```

ì¸ì¦ íë¦„ì€ ì‚¬ìš©ì ì§€ì • ë¡œê·¸ì¸ ë° íšŒì›ê°€ì… íë¦„, ë‹¤ë‹¨ê³„ ì¸ì¦(MFA), íƒ€ì‚¬ ì†Œì…œ ë¡œê·¸ì¸ ì œê³µìë¥¼ í†µí•´ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•  ìˆ˜ ìˆë‹¤. ì•±ì— ì¸ì¦ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë©´ AmplifyëŠ” AWS ê³„ì •ì— Amazon Cognito ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ë°°í¬í•œë‹¤.

ì´í›„ Amplify Authenticator ì»´í¬ë„ŒíŠ¸ë‚˜ í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì íë¦„ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‰½ê²Œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

```Typescript
import { withAuthenticator } from '@aws-amplify/ui-react';

function App({ signOut, user }) {
  return (
    <>
      <h1>Hello {user.username}</h1>
      <button onClick={signOut}>Sign out</button>
    </>
  );
}

export default withAuthenticator(App);
```

## UI êµ¬ì¶•í•˜ê¸°

AmplifyëŠ” UI ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬, Figma-to-code ìƒì„±, CRUD í¼ ìƒì„± ê¸°ëŠ¥ì„ í†µí•´ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ ë¹ ë¥´ê²Œ êµ¬ì¶•í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.
https://ui.docs.amplify.aws/react/components

## Amplifyë¥¼ ë„˜ì–´ AWSì— ì—°ê²°í•˜ê¸°

### AWS ë¦¬ì†ŒìŠ¤ ì¶”ê°€í•˜ê¸°

Gen 2ëŠ” AWS Cloud Development Kit (CDK) ìœ„ì— êµ¬ì¶•ë˜ì–´ ìˆìœ¼ë©°, @aws-amplify/backendì˜ ë°ì´í„°(Data) ë° ì¸ì¦(Auth) ê¸°ëŠ¥ì€ L3 AWS CDK Constructsë¥¼ ë˜í•‘í•œë‹¤. ì´ë¥¼ í†µí•´ Amplifyê°€ ìƒì„±í•œ ë¦¬ì†ŒìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ë° ë³„ë„ì˜ íŠ¹ë³„í•œ ì„¤ì •ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, Amazon Location Servicesë¥¼ ì¶”ê°€í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ íŒŒì¼ì„ ì¶”ê°€í•˜ë©´ ëœë‹¤: amplify/custom/maps/resource.ts.

```Typescript
import { CfnOutput, Stack, StackProps } from 'aws-cdk-lib';
import * as locations from 'aws-cdk-lib/aws-location';
import { Construct } from 'constructs';

export class LocationMapStack extends Stack {
  constructor(scope: Construct, id: string, props?: StackProps) {
    super(scope, id, props);

    // Create the map resource
    const map = new locations.CfnMap(this, 'LocationMap', {
      configuration: {
        style: 'VectorEsriStreets' // map style
      },
      description: 'My Location Map',
      mapName: 'MyMap'
    });

    new CfnOutput(this, 'mapArn', {
      value: map.attrArn,
      exportName: 'mapArn'
    });
  }
}
```

ì´ íŒŒì¼ì€ amplify/backend.tsì— í¬í•¨ë˜ì–´ì•¼ í•˜ë©°, ì´ë¥¼ í†µí•´ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ê°€ Amplify ì•±ì˜ ì¼ë¶€ë¡œ ë°°í¬ëœë‹¤.

```Typescript
import { Backend } from '@aws-amplify/backend';
import { auth } from './auth/resource';
import { data } from './data/resource';
import { LocationMapStack } from './locationMapStack/resource';

const backend = new Backend({
  auth,
  data
});

new LocationMapStack(
  backend.getStack('LocationMapStack'),
  'myLocationResource',
  {}
);
```

### ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ì— ì—°ê²°í•˜ê¸°

AmplifyëŠ” ê¸°ì¡´ AWS ë¦¬ì†ŒìŠ¤ ë° ì„¤ì •ê³¼ í†µí•©í•˜ì—¬ ì‘ë™í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Amplifyì˜ ë¯¸ë¦¬ êµ¬ì„±ëœ ì¸ì¦ UI ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•´ ë³„ë„ë¡œ ìƒì„± ë° êµ¬ì„±í•œ Amazon Cognito ì‚¬ìš©ì í’€ê³¼ ì—°ë™í•  ìˆ˜ ìˆë‹¤. ë˜ëŠ” Amplify Storageë¥¼ í†µí•´ ê¸°ì¡´ Amazon S3 ë²„í‚·ì— ì €ì¥ëœ ì´ë¯¸ì§€ì™€ íŒŒì¼ì„ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì— í‘œì‹œí•  ìˆ˜ ìˆë‹¤.

Amplifyì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ê¸°ì¡´ AWS ì„œë¹„ìŠ¤ë¥¼ í™œìš©í•  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ë¯€ë¡œ, ê¸°ì¡´ ë°±ì—”ë“œ ì¸í”„ë¼ë¥¼ ë°©í•´í•˜ì§€ ì•Šìœ¼ë©´ì„œ Amplifyì˜ ê¸°ëŠ¥ì„ í˜„ì¬ ì›Œí¬í”Œë¡œìš°ì— ì ì§„ì ìœ¼ë¡œ í†µí•©í•  ìˆ˜ ìˆë‹¤.


